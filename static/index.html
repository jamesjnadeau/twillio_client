<!doctype html>
<html>
<head>
	<title>Explore Vermont Food</title>

	<meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">

	<script src="/vendor/webcomponentsjs/webcomponents.js"></script>

	<link rel="import" href="/vendor/firebase-element/firebase-element.html">

	<link rel="import" href="/vendor/core-header-panel/core-header-panel.html">
	<link rel="import" href="/vendor/core-toolbar/core-toolbar.html">
	<link rel="import" href="/vendor/core-drawer-panel/core-drawer-panel.html">
	<link rel="import" href="/vendor/core-menu/core-menu.html">
	<link rel="import" href="/vendor/paper-item/paper-item.html">
	<link rel="import" href="/vendor/paper-shadow/paper-shadow.html" >
	<link rel="import" href="/vendor/paper-icon-button/paper-icon-button.html">

	
	


	<style>
		html,body {
			font-family: Helvetica;
			height: 100%;
			margin: 0;
			background-color: #E5E5E5;
		}
		core-header-panel {
			height: 100%;
			overflow: auto;
			-webkit-overflow-scrolling: touch;
			background-color: #E5E5E5;
		}
		core-toolbar {
			background: #006633;
			color: white;
		}
		.card {
			display: block;
			background: white;
			box-sizing: border-box;
			margin: 16px;
			padding: 16px;
			border-radius: 2px;
		}
	</style>
	
	
</head>
<body unresolved>
	<template is="auto-binding">
	<core-drawer-panel force-narrow="true" >
		<core-header-panel drawer>
			<core-toolbar></core-toolbar>
			<div>
				<core-menu selected="0" on-core-select="{{selectAction}}">>
					<paper-item href="/all_options.php" ><core-icon icon="wallet-membership" ></core-icon>  All Options</paper-item>
					<paper-item href="/all_options.php" ><core-icon icon="chevron-right" ></core-icon> Burlington</paper-item>
					<paper-item href="/all_options.php" ><core-icon icon="chevron-right" ></core-icon> Woodstock</paper-item>
					<paper-item href="/all_options.php" ><core-icon icon="chevron-right" ></core-icon> Montpelier</paper-item>
					<paper-item href="/all_options.php" ><core-icon icon="chevron-right" ></core-icon> Middlebury</paper-item>
					<paper-item href="/all_options.php" ><core-icon icon="chevron-right" ></core-icon> Bennington</paper-item>
					<paper-item href="/all_options.php" ><core-icon icon="chevron-right" ></core-icon> Brattleboro</paper-item>
					<paper-item href="/all_options.php" ><core-icon icon="chevron-right" ></core-icon> Plymouth</paper-item>
				</core-menu>
				
				
			</div>
		</core-header-panel>
		<core-header-panel main>
			<core-toolbar>
				<paper-icon-button icon="menu" core-drawer-toggle ></paper-icon-button>
				<span flex>Explore Vermont Food</span>
				<paper-icon-button icon="search"></paper-icon-button>
				<paper-icon-button icon="explore"></paper-icon-button>
			</core-toolbar>
			<div class="container" layout vertical>
				<paper-shadow z="1" class="card" >
					<div>
						

							<firebase-element id="base" on-data-change="{{dataChange}}" data="{{data}}" location="https://treedata-demo.firebaseio.com/demo" log></firebase-element>

							<h3>Top-level properties persist automatically:</h3>

							<input value="{{data.name}}">
							<br>
							<input value="{{data.info}}">

							<hr>

							<h3>Nested properties must be persisted manually:</h3>

							<input value="{{data.more.color}}">

							<button on-tap="{{commitMore}}">Commit data.more</button>

							<hr>

							<h3>Remote Data</h3>
							<pre>{{json}}</pre>

							<hr>

							<button on-tap="{{resetLocal}}">Reset Local</button>
							<button on-tap="{{removeLocal}}">Remove Local</button>
							<button on-tap="{{resetRemote}}">Reset remote</button>
							<button on-tap="{{removeRemote}}">Remove Remote</button>


						
					</div>
					
				</paper-shadow>
			</div>
		</core-header-panel>
	</core-drawer-panel>
	</template>
	<script>

		addEventListener('template-bound', function(e) {

			scope = e.target;

			scope.resetLocal = function() {
				// direct setting of data is persisted automatically
				this.data = {
					name: 'anonymous',
					info: 'none',
					more: {
						color: "yellow"
					}
				};
			};

			scope.removeLocal = function() {
				this.data = null;
			};

			scope.resetRemote = function() {
				// Simulate other actor setting data to same remote location
				new Firebase('https://treedata-demo.firebaseio.com/demo').set({
					name: 'anonymous',
					info: 'none',
					more: {
						color: "yellow"
					}
				});
			};

			scope.removeRemote = function() {
				// Simulate other actor removing data from same remote location
				new Firebase('https://treedata-demo.firebaseio.com/demo').remove();
			};

			scope.commitMore = function() {
				this.$.base.commitProperty('more');
			};

			scope.dataChange = function() {
				this.json = JSON.stringify(this.data, null, '\t');
			};
			
			scope.selectAction = function(e, detail) {
				if (detail.isSelected) {
					var selectedItem = detail.item;
					console.log(selectedItem);
				}
			}
		});
	</script>
</body>
</html>